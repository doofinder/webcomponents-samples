<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Doofinder Classic layer code sample</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="stylesheet" href="./custom_card.css" data-df-component="df-card" />
  
  <script type="module">
    import { Context, setLanguage } from 'https://cdn.doofinder.com/dev/v8/core/core.js';
    import 'https://cdn.doofinder.com/dev/v8/webcomponents/webcomponents.js';

    // Do an initial query with "orinal" term.
    let context = Context.getContext("7a6100c782c09126479e9270ecc619b3", "EU1"); 
    context.query.text = "camisa";
    context.search();   
  </script>
</head>

<body>
  <div class="input-container">
    <input type="text" class="form-control" id="search_input" placeholder="Search Here" />
  </div>

  <!-- Card template definition -->
  <script type="text/x-template" id="card_template">
    <button class="rounded-button" id="fav"><df-icon shape="favorite" style="position: relative; top: 1px;"></df-icon></button>
    <button class="rounded-button" id="cart"><df-icon shape="add_shopping_cart" style="position: relative; top: 2px; left: 1px;"></df-icon></button>
    <df-image src="${this.data.image_link}" ?hidden=${!this.data.image_link}></df-image>
    <df-price
      type="regular"
      .value=${this.data.price}
      .currency=${this.currency}>
    </df-price>
    <a class="title" href="${this.data.link}" role="heading" data-df-role="link">${this.data.title}</a>
    <df-rating value="4"></df-rating>
    <a class="viewmore" href="#detail"><span>See the details</span><df-icon shape="chevron_right"></df-icon></a>
  </script>

  <!-- Result template definition -->
  <template id="grid_template">
    <df-card class="theme-airpods-1" .data=${context.data} .currency=${context.currency} template="#card_template"></df-card>
  </template>

  <df-layer hashid="7a6100c782c09126479e9270ecc619b3" positioned-reference="#search_input" positioned-overflow="fix-all"
    positioned="auto" hidden>
    <df-input-capture input="#search_input"></df-input-capture>
    <div class="df-header">
      Total Found: <df-info key="total_found"></df-info>
    </div>
    <div class="df-aside">
      <h2>Filter by Category</h2>
      <df-terms-filter field="categories"></df-terms-filter>
      <h2>Filter by Brand</h2>
      <df-terms-filter field="brand"></df-terms-filter>
      <h2>Filter by Price</h2>
      <df-range-filter field="best_price" currency="EUR"></df-range-filter>
    </div>
    <div class="df-content">
      <!-- Using new grid layout template -->
      <df-results grid-layout="#grid_template" infinite></df-results>
    </div>
    <div class="df-footer">
      Powered by Doofinder
    </div>
  </df-layer>
</body>
</html>
